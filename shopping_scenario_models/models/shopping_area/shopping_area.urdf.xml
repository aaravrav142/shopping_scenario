<?xml version="1.0"?>
<robot name="shopping_rack">
  
  <macro name="boxlink" params="name size_x size_y size_z">
    <link name="${name}">
      <visual>
	<origin rpy="0 0 0" xyz="0 0 0" />
	<geometry>
	  <box size="${size_x} ${size_y} ${size_z}" />
	</geometry>
      </visual>
      
      <collision>
	<origin rpy="0 0 0" xyz="0 0 0" />
	<geometry>
	  <box size="${size_x} ${size_y} ${size_z}" />
	</geometry>
      </collision>
    </link>
  </macro>
  
  <macro name="static_joint" params="name parent xyz">
    <joint name="${name}_joint" type="fixed">
      <origin rpy="0 0 0" xyz="${xyz}" />
      <parent link="${parent}" />
      <child link="${name}" />
    </joint>
  </macro>
  
  <macro name="rack_floor" params="parent rack_size_x rack_size_y size_z">
    <boxlink name="rack_level_0" size_x="${rack_size_x}" size_y="${rack_size_y}" size_z="${size_z}" />
    <static_joint name="rack_level_0" parent="${parent}" xyz="0 0 ${size_z/2}" />
  </macro>
  
  <macro name="wall" params="name parent x y size_x size_y size_z">
    <boxlink name="${name}" size_x="${size_x}" size_y="${size_y}" size_z="${size_z}" />
    <static_joint name="${name}" parent="${parent}" xyz="${x} ${y} ${size_z/2}" />
  </macro>
  
  <macro name="shopping_area" params="name height">
    <link name="${name}">
    </link>
    
    <wall name="${name}_wall_back" parent="${name}" x="0" y="-1.0" size_x="2.0" size_y="0.2" size_z="${height}" />
    <wall name="${name}_wall_left" parent="${name}" x="-0.9" y="-1.6" size_x="0.2" size_y="1.0" size_z="${height}" />
    <wall name="${name}_wall_right" parent="${name}" x="0.9" y="-1.315" size_x="0.2" size_y="0.43" size_z="${height}" />
    <wall name="${name}_wall_farright" parent="${name}" x="1.5" y="-1.43" size_x="1.0" size_y="0.2" size_z="${height}" />
  </macro>
  
  <shopping_area name="shopping_area" height="2.0" />
  
</robot>
